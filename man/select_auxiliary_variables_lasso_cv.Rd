% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/select_auxiliary_variables_lasso_cv.R
\name{select_auxiliary_variables_lasso_cv}
\alias{select_auxiliary_variables_lasso_cv}
\title{Select Auxiliary Variables via LASSO with Cross-Validation (Binary Outcomes)}
\usage{
select_auxiliary_variables_lasso_cv(
  df,
  outcome_vars,
  auxiliary_vars,
  must_have_vars = NULL,
  check_twoway_int = TRUE,
  nfolds = 5,
  verbose = TRUE,
  standardize = TRUE,
  return_models = FALSE,
  parallel = FALSE
)
}
\arguments{
\item{df}{A data frame containing the data for modeling.}

\item{outcome_vars}{Character vector of binary outcome variable names to model. Each
must exist in \code{df} and have at least two unique values (after factor conversion).}

\item{auxiliary_vars}{Character vector of auxiliary variable names to be used as predictors.}

\item{must_have_vars}{Optional character vector of variable names that must be included
in the model (penalty factor 0). If interactions are included, any interaction containing
a must-have variable is also assigned zero penalty.}

\item{check_twoway_int}{Logical; include all two-way interactions among auxiliary variables.
Defaults to \code{TRUE}.}

\item{nfolds}{Number of folds for cross-validation. Defaults to 5.}

\item{verbose}{Logical; print progress messages. Defaults to \code{TRUE}.}

\item{standardize}{Logical; standardize predictors before fitting. Defaults to \code{TRUE}.}

\item{return_models}{Logical; return fitted \code{cv.glmnet} objects. Defaults to \code{FALSE}.}

\item{parallel}{Logical; run cross-validation in parallel (requires \strong{doParallel}). Defaults to \code{FALSE}.}
}
\value{
An object of class \code{"select_auxiliary_variables_lasso_cv"} with the following components:
\describe{
\item{selected_variables}{Character vector of variables selected across all outcome models.}
\item{by_outcome}{Named list of character vectors, each containing the selected variables for
each outcome.}
\item{selected_lambdas}{Named numeric vector of lambda values (specifically, lambda.min)
for each outcome.}
\item{penalty_factors}{Named numeric vector with penalty factors (0 for must-keep, 1 otherwise).}
\item{models}{List of \code{cv.glmnet} objects per outcome if \code{return_models = TRUE}, otherwise an empty list.}
\item{goodness_of_fit}{Named list per outcome with cross-validation metrics (cv_error, cv_error_sd)
and full data metrics (deviance_explained, auc, accuracy, brier_score, raw_coefs).}
\item{interaction_metadata}{List containing metadata on interaction terms, main effects in interactions,
and the full formula used.}
}
}
\description{
This function performs LASSO-penalized logistic regression with cross-validation to select
auxiliary variables for modeling one or more binary outcome variables. It allows for the
inclusion of all two-way interactions among the auxiliary variables and the option to
force certain variables to remain in the model through the use of zero penalty factors.
}
\details{
The function outputs a list with the selected variables across outcomes, the associated
lambda values, the goodness-of-fit statistics, and optionally the fitted models and
interaction terms.
}
\examples{
# Example 1: Select auxiliary variables using LASSO for binary outcomes
result <- select_auxiliary_variables_lasso_cv(
  df = survey_data,
  outcome_vars = c("outcome1", "outcome2"),
  auxiliary_vars = c("age", "gender", "income"),
  must_have_vars = c("age"),
  check_twoway_int = TRUE,
  nfolds = 5,
  verbose = TRUE,
  standardize = TRUE,
  return_models = FALSE,
  parallel = FALSE
)

# Example 2: Run with parallel cross-validation and return models
result_parallel <- select_auxiliary_variables_lasso_cv(
  df = survey_data,
  outcome_vars = c("outcome1"),
  auxiliary_vars = c("age", "gender", "income"),
  must_have_vars = NULL,
  check_twoway_int = TRUE,
  nfolds = 10,
  verbose = TRUE,
  standardize = TRUE,
  return_models = TRUE,
  parallel = TRUE
)

}
