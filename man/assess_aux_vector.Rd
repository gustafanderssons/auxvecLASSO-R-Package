% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/assess_aux_vector.R
\name{assess_aux_vector}
\alias{assess_aux_vector}
\title{Assess Auxiliary vector Calibration and Diagnostics}
\usage{
assess_aux_vector(
  design,
  df,
  calibration_formula = NULL,
  calibration_pop_totals = NULL,
  register_vars = NULL,
  register_pop_means = NULL,
  survey_vars = NULL,
  domain_vars = NULL,
  diagnostics = c("weight_variation", "register_diagnostics", "survey_diagnostics"),
  already_calibrated = FALSE,
  verbose = FALSE
)
}
\arguments{
\item{design}{A survey design object, typically of class \code{svydesign}, representing
the survey data design.}

\item{df}{A data frame containing the survey data to be used in the analysis.}

\item{calibration_formula}{An optional formula object specifying the auxiliary variables
used for calibration (e.g., \code{~age + gender}). If provided, the weights will
be calibrated.}

\item{calibration_pop_totals}{An optional list of population totals for the auxiliary
variables in \code{calibration_formula}. This can be used in the calibration process.}

\item{register_vars}{A character vector specifying the names of the auxiliary variables
from the register data that should be used in the diagnostics. If \code{NULL}, no
register diagnostics will be performed.}

\item{register_pop_means}{A list containing population means for the register variables.
The list may include a "total" entry for the total population means and/or a "by_domain"
entry for domain-specific population means.}

\item{survey_vars}{A character vector specifying the names of the survey variables
to be used in the diagnostics. If \code{NULL}, no survey diagnostics will be performed.}

\item{domain_vars}{A character vector specifying the domain variables used to group
data for domain-specific diagnostics. If \code{NULL}, diagnostics will be computed
for the entire sample rather than for specific domains.}

\item{diagnostics}{A character vector specifying which diagnostics to compute. Possible
values include:
\itemize{
\item \code{"weight_variation"}: Computes diagnostics related to weight variation.
\item \code{"register_diagnostics"}: Computes diagnostics based on the register data.
\item \code{"survey_diagnostics"}: Computes diagnostics based on the survey data.
}
The default is all three.}

\item{already_calibrated}{A logical flag indicating whether the weights have already
been calibrated. If \code{TRUE}, the calibration step will be skipped.}

\item{verbose}{A logical flag indicating whether to print additional messages during
the execution of the function. This can be useful for debugging or monitoring progress.}
}
\value{
A list of class \code{"assess_aux_vector"} containing the results of the
diagnostic assessments. The list includes the following components:
\itemize{
\item \code{weight_variation}: A numeric vector or matrix containing the results
of the weight variation diagnostics.
\item \code{register_diagnostics}: A list containing diagnostics based on the
register data. This may include the total diagnostics and/or domain-specific
diagnostics.
\item \code{survey_diagnostics}: A list containing diagnostics based on the survey
data. This may include the total diagnostics and/or domain-specific diagnostics.
}
}
\description{
This function assesses the calibration of auxiliary variables in a survey design,
performs various diagnostics, and optionally calibrates weights based on a specified
calibration formula. It provides diagnostics on weight variation, register data
alignment, and survey data alignment. The results are returned as a list of class
"assess_aux_vector".
}
\details{
The function supports several diagnostic checks, including weight variation
diagnostics, register diagnostics (total and by domain), and survey diagnostics
(total and by domain).

The function may also calibrate survey weights based on a provided calibration formula
and population totals. Calibration can be skipped if the weights are already calibrated.
}
\examples{
# Example 1: Assessing diagnostics without calibration
result <- assess_aux_vector(
  design = survey_design_object,
  df = survey_data,
  register_vars = c("age", "income"),
  survey_vars = c("age", "income"),
  diagnostics = c("weight_variation", "register_diagnostics"),
  verbose = TRUE
)

# Example 2: Calibrating weights and assessing diagnostics
result <- assess_aux_vector(
  design = survey_design_object,
  df = survey_data,
  calibration_formula = ~age + gender,
  calibration_pop_totals = list(age = c(18 = 1000, 25 = 1200)),
  register_vars = c("age", "gender"),
  survey_vars = c("income"),
  diagnostics = c("weight_variation", "survey_diagnostics"),
  verbose = TRUE
)

}
\seealso{
\code{\link[survey]{calibrate}} for the calibration function.
}
